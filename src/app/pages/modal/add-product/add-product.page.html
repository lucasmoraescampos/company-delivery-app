<ion-header mode="ios" class="ion-no-border">

  <ion-toolbar>

    <ion-buttons slot="end">

      <ion-button class="close" color="dark" (click)="dismiss()">

        <ion-icon src="../../../../assets/icon/close.svg"></ion-icon>

      </ion-button>

    </ion-buttons>

    <ion-title>

      Adicionar Produto

    </ion-title>

  </ion-toolbar>

</ion-header>

<ion-content mode="ios">

  <ion-grid class="ion-padding" [formGroup]="formGroupProduct">

    <ion-row class="animated bounceInDown" *ngIf="!session">

      <ion-col class="ion-text-center" size="12">

        <ion-label>

          <p>Escolha a sessão onde o produto será encontrado</p>

        </ion-label>

      </ion-col>

      <ion-col class="ion-text-center" size="12">

        <ion-button fill="outline" expand="block" (click)="selectSession()">

          <ion-icon slot="start" name="albums-outline"></ion-icon>

          Escolher Sessão

        </ion-button>

      </ion-col>

    </ion-row>

    <ion-row class="animated bounceInDown" *ngIf="session && !photo">

      <ion-col class="ion-text-center" size="12">

        <ion-label>

          <p>Escolha uma imagem para o produto</p>

        </ion-label>

      </ion-col>

      <ion-col class="ion-text-center" size="12">

        <ion-button expand="block" fill="outline" (click)="choosePhoto()" *ngIf="!photo">

          <ion-icon slot="start" name="image-outline"></ion-icon>

          Escolher Imagem

        </ion-button>

      </ion-col>

    </ion-row>

    <ion-row class="animated bounceInUp" *ngIf="session && photo">

      <ion-col class="ion-text-center" size="12">

        <ion-thumbnail (click)="choosePhoto()">

          <img [src]="photo">

        </ion-thumbnail>

      </ion-col>

      <ion-col size="12">

        <ion-label class="label-custom">Sessão</ion-label>

        <p class="input-custom" (click)="selectSession()">{{ session.name }}</p>

      </ion-col>

      <ion-col size="12">

        <ion-label class="label-custom">Nome</ion-label>

        <ion-input class="input-custom" type="text" formControlName="name" placeholder="Escreva o nome do produto"
          autocapitalize="on">
        </ion-input>

      </ion-col>

      <ion-col size="12">

        <ion-label class="label-custom">Descrição</ion-label>

        <ion-textarea class="input-custom" formControlName="description" rows="4" placeholder="Descreva o produto">
        </ion-textarea>

      </ion-col>

      <ion-col size="12">

        <ion-label class="label-custom">Categoria</ion-label>

        <ion-select class="select-custom" formControlName="subcategory_id"
          placeholder="Selecione a categoria do produto" mode="md" interface="action-sheet" cancelText="Cancelar">

          <ion-select-option [value]="s.id" *ngFor="let s of subcategories">{{ s.name }}</ion-select-option>

        </ion-select>

      </ion-col>

      <ion-col size="12">

        <ion-label class="label-custom">Preço</ion-label>

        <ion-input class="input-custom" type="text" inputmode="numeric" formControlName="price"
          [brmasker]="{ money: true, thousand: '.',  decimalCaracter: ',' }">
        </ion-input>

      </ion-col>

    </ion-row>

  </ion-grid>

  <ion-grid class="ion-no-padding ion-margin-top animated bounceInUp" [formGroup]="formGroupProduct"
    *ngIf="session && photo">

    <ion-row>

      <ion-col class="header" size="12">

        <p>Dias disponíveis:</p>

      </ion-col>

      <ion-col class="ion-no-padding" size="12">

        <ion-radio-group>

          <ion-item lines="full">

            <ion-label>Domingo</ion-label>

            <ion-checkbox color="primary" (ionChange)="changeDays($event)" value="is_available_sunday"></ion-checkbox>

          </ion-item>

          <ion-item lines="full">

            <ion-label>Segunda</ion-label>

            <ion-checkbox color="primary" (ionChange)="changeDays($event)" value="is_available_monday"></ion-checkbox>

          </ion-item>

          <ion-item lines="full">

            <ion-label>Terça</ion-label>

            <ion-checkbox color="primary" (ionChange)="changeDays($event)" value="is_available_tuesday"></ion-checkbox>

          </ion-item>

          <ion-item lines="full">

            <ion-label>Quarta</ion-label>

            <ion-checkbox color="primary" (ionChange)="changeDays($event)" value="is_available_wednesday">
            </ion-checkbox>

          </ion-item>

          <ion-item lines="full">

            <ion-label>Quinta</ion-label>

            <ion-checkbox color="primary" (ionChange)="changeDays($event)" value="is_available_thursday"></ion-checkbox>

          </ion-item>

          <ion-item lines="full">

            <ion-label>Sexta</ion-label>

            <ion-checkbox color="primary" (ionChange)="changeDays($event)" value="is_available_friday"></ion-checkbox>

          </ion-item>

          <ion-item lines="none">

            <ion-label>Sábado</ion-label>

            <ion-checkbox color="primary" (ionChange)="changeDays($event)" value="is_available_saturday"></ion-checkbox>

          </ion-item>

        </ion-radio-group>

      </ion-col>

      <ion-col class="header" size="12">

        <p>Horários disponíveis:</p>

      </ion-col>

      <ion-col size="12">

        <ion-item lines="full" [hidden]="isAlwaysAvailable">

          <ion-label>À partir de</ion-label>

          <ion-datetime formControlName="start_time" displayFormat="HH:mm" cancelText="Voltar" doneText="Confirmar">
          </ion-datetime>

        </ion-item>

        <ion-item lines="full" [hidden]="isAlwaysAvailable">

          <ion-label>Até</ion-label>

          <ion-datetime formControlName="end_time" displayFormat="HH:mm" cancelText="Voltar" doneText="Confirmar">
          </ion-datetime>

        </ion-item>

        <ion-item lines="none" mode="md">

          <ion-checkbox color="primary" (ionChange)="changeAlwaysAvailable($event)"></ion-checkbox>

          <ion-label class="ion-padding-start">Disponível em todos os horários</ion-label>

        </ion-item>

      </ion-col>

    </ion-row>

    <ion-row class="ion-padding ion-margin-top">

      <ion-col size="12">

        <ion-button mode="ios" expand="block" (click)="add()" [disabled]="formGroupProduct.invalid"
          [color]="formGroupProduct.valid ? 'primary' : 'light'">

          <ion-spinner mode="md" name="crescent" [hidden]="loading == false"></ion-spinner>

          <span [hidden]="loading">Adicionar</span>

        </ion-button>

      </ion-col>

    </ion-row>

  </ion-grid>

</ion-content>