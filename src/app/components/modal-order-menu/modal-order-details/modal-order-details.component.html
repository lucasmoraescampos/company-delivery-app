<ion-header class="ion-no-border">

  <ion-toolbar>

    <ion-title *ngIf="slideIndex == 0">Produtos</ion-title>

    <ion-title *ngIf="slideIndex == 1">Tipo de pedido</ion-title>

    <ion-title *ngIf="slideIndex == 2">Finalizar</ion-title>

    <ion-buttons slot="end">

      <ion-button (click)="dismiss()">

        <ion-icon slot="icon-only" name="close"></ion-icon>

      </ion-button>

    </ion-buttons>

  </ion-toolbar>

</ion-header>

<ion-content customScroll>

  <ion-slides class="swiper-no-swiping">

    <ion-slide>

      <ion-list>
    
        <ion-item lines="full" button="true" detail="false" *ngFor="let product of order.products; let i=index" (click)="options(i)">
    
          <ion-label class="ion-text-wrap">
            
          <ion-badge>{{ product.qty }}</ion-badge>
          
          {{ product.name }}
          
          </ion-label>
    
          <ion-label class="ion-text-end ion-text-wrap price">{{ product.price | money }}</ion-label>
    
        </ion-item>
    
        <ion-item lines="none">
    
          <ion-label>Total</ion-label>
    
          <ion-label class="ion-text-end">{{ total | money }}</ion-label>
    
        </ion-item>
    
      </ion-list>

    </ion-slide>

    <ion-slide>

      <ion-list>

        <ion-radio-group mode="md" [(ngModel)]="type">
          
          <ion-item lines="full">

            <ion-radio slot="start" [value]="0"></ion-radio>

            <ion-label>Local</ion-label>

          </ion-item>

          <ion-item lines="full">

            <ion-radio slot="start" [value]="1"></ion-radio>

            <ion-label>Delivery</ion-label>

          </ion-item>

        </ion-radio-group>

      </ion-list>

    </ion-slide>

    <ion-slide>

      <ion-grid class="ion-padding-horizontal">

        <ion-row>
    
          <ion-col size-xs="12" size-sm="6" *ngIf="type == 0">
    
            <ion-label class="stacked">Atendente</ion-label>
    
            <ion-select interface="action-sheet" cancelText="Cancelar" placeholder="opcional" [(ngModel)]="attendant_id">
    
              <ion-select-option [value]="attendant.id" *ngFor="let attendant of attendants">{{ attendant.name }}</ion-select-option>
    
            </ion-select>
            
          </ion-col>
    
          <ion-col size-xs="12" size-sm="6" *ngIf="type == 0">
    
            <ion-label class="stacked">Mesa</ion-label>
    
            <ion-select interface="action-sheet" cancelText="Cancelar" placeholder="opcional" [(ngModel)]="table_id">
    
              <ion-select-option [value]="table.id" *ngFor="let table of tables">{{ table.name }}</ion-select-option>
              
            </ion-select>
            
          </ion-col>

          <ion-col size-xs="12" size-sm="12" *ngIf="type == 1">
          
            <ion-label [class.invalid]="submitAttempt && payment_type === undefined" class="stacked">Tipo de pagamento</ion-label>

            <ion-select [class.invalid]="submitAttempt && payment_type === undefined" interface="action-sheet" cancelText="Cancelar" placeholder="Selecione" [(ngModel)]="payment_type">
      
              <ion-select-option [value]="0">Receber agora</ion-select-option>

              <ion-select-option [value]="2">Receber na entrega</ion-select-option>
    
            </ion-select>

            <ion-note class="validation-error" *ngIf="submitAttempt && payment_type === undefined">

              <ion-icon name="information-circle-outline"></ion-icon>
    
              Tipo de pagamento é obrigatório.
    
            </ion-note>

          </ion-col>

          <ion-col size-xs="12" size-sm="12" *ngIf="type == 1">
    
            <ion-label [class.invalid]="submitAttempt && (!address || address?.length == 0)" class="stacked">Endereço de entrega</ion-label>
    
            <ion-textarea [class.invalid]="submitAttempt && (!address || address?.length == 0)" rows="4" maxlength="500" [(ngModel)]="address"></ion-textarea>

            <ion-note class="validation-error" *ngIf="submitAttempt && (!address || address?.length == 0)">

              <ion-icon name="information-circle-outline"></ion-icon>
    
              Endereço é obrigatório.
    
            </ion-note>
            
          </ion-col>

          <ion-col size-xs="12" size-sm="12" *ngIf="type == 1">
    
            <ion-label class="stacked">Informações adicionais</ion-label>
    
            <ion-textarea maxlength="500" placeholder="Nome, telefone... (opcional)" [(ngModel)]="additional_information"></ion-textarea>
            
          </ion-col>
    
        </ion-row>
    
      </ion-grid>
      
    </ion-slide>

  </ion-slides>

</ion-content>

<ion-footer class="ion-no-border">

  <ion-grid class="ion-padding">

    <ion-row>

      <ion-col size="12" *ngIf="slideIndex == 0">

        <ion-button expand="block" (click)="next()">
          
          <ion-icon slot="start" name="checkmark-circle-outline"></ion-icon> Confirmar Produtos
        
        </ion-button>

      </ion-col>

      <ion-col size="6" *ngIf="slideIndex > 0">

        <ion-button fill="clear" (click)="prev()">
          
          <ion-icon slot="start" name="arrow-back-outline"></ion-icon> Voltar
        
        </ion-button>

      </ion-col>

      <ion-col class="ion-text-end" size="6" *ngIf="slideIndex == 1">

        <ion-button (click)="next()">
          
          Confirmar <ion-icon slot="end" name="arrow-forward-outline"></ion-icon>
        
        </ion-button>

      </ion-col>

      <ion-col class="ion-text-end" size="6" *ngIf="slideIndex == 2">

        <ion-button (click)="save()">
          
          <ion-icon slot="start" name="checkmark-circle-outline"></ion-icon> Concluír
        
        </ion-button>

      </ion-col>

    </ion-row>

  </ion-grid>

</ion-footer>

<ngx-loading [show]="loading"></ngx-loading>